/**
 * Hilo 0.1.0
 * Copyright 2014 hilojs.com
 * Licensed under the MIT License
 */

!function(a){var b=function(){var c=a,d=document,e=d.documentElement,f=0;return{getUid:function(a){var b=++f;if(a){var c=a.charCodeAt(a.length-1);return c>=48&&57>=c&&(a+="_"),a+b}return b},viewToString:function(a){for(var b,c=a;c;)b=b?c.id+"."+b:c.id,c=c.parent;return b},copy:function(a,b,c){for(var d in b)(!c||a.hasOwnProperty(d)||void 0!==a[d])&&(a[d]=b[d]);return a},browser:function(){var a=navigator.userAgent,b={iphone:/iphone/i.test(a),ipad:/ipad/i.test(a),ipod:/ipod/i.test(a),android:/android/i.test(a),webkit:/webkit/i.test(a),chrome:/chrome/i.test(a),safari:/safari/i.test(a),firefox:/firefox/i.test(a),ie:/msie/i.test(a),opera:/opera/i.test(a),supportTouch:"ontouchstart"in c,supportCanvas:null!=d.createElement("canvas").getContext,supportStorage:!1,supportOrientation:"orientation"in c,supportDeviceMotion:"ondevicemotion"in c};try{var f="hilo";localStorage.setItem(f,f),localStorage.removeItem(f),b.supportStorage=!0}catch(g){}var h=b.jsVendor=b.webkit?"webkit":b.firefox?"Moz":b.opera?"O":b.ie?"ms":"",i=b.cssVendor="-"+h+"-",j=d.createElement("div"),k=j.style,l=void 0!=k[h+"Transform"],m=void 0!=k[h+"Perspective"];return m&&(j.id="test3d",k=d.createElement("style"),k.textContent="@media ("+i+"transform-3d){#test3d{height:3px}}",d.head.appendChild(k),e.appendChild(j),m=3==j.offsetHeight,d.head.removeChild(k),e.removeChild(j)),b.supportTransform=l,b.supportTransform3D=m,b}(),getElementRect:function(a){try{var b=a.getBoundingClientRect()}catch(d){b={top:a.offsetTop,left:a.offsetLeft,width:a.offsetWidth,height:a.offsetHeight}}var f=(c.pageXOffset||e.scrollLeft)-(e.clientLeft||0),g=(c.pageYOffset||e.scrollTop)-(e.clientTop||0),h=c.getComputedStyle?getComputedStyle(a):a.currentStyle,i=parseInt,j=i(h.paddingLeft)+i(h.borderLeftWidth),k=i(h.paddingTop)+i(h.borderTopWidth),l=i(h.paddingRight)+i(h.borderRightWidth),m=i(h.paddingBottom)+i(h.borderBottomWidth);return{left:b.left+f+j,top:b.top+g+k,width:b.right-l-b.left-j,height:b.bottom-m-b.top-k}},createElement:function(a,b){var c,e,f,g=d.createElement(a);for(c in b)if(e=b[c],"style"===c)for(f in e)g.style[f]=e[f];else g[c]=e;return g},setElementStyleByView:function(a){var c=a.drawable,d=c.image,e=c.rect,f=c.domElement.style,g=b.browser.jsVendor,h="px";f.pointerEvents="none",f.display=!a.visible||a.alpha<=0?"none":"",f.width=a.width+h,f.height=a.height+h,f.opacity=a.alpha,f.zIndex=a.depth,f[g+"TransformOrigin"]=a.pivotX+h+" "+a.pivotY+h,f[g+"Transform"]=this.getTransformCSS(a),d&&(4!=f.backgroundImage.indexOf(d.src)&&(f.backgroundImage="url("+d.src+")"),e&&(f.backgroundPosition=-e[0]+h+" "+-e[1]+h)),a.mask&&(f[g+"MaskImage"]=a.mask.drawable.domElement.style.backgroundImage,f[g+"MaskRepeat"]="no-repeat",f[g+"MaskPosition"]=a.mask.x+h+" "+a.mask.y+h)},getTransformCSS:function(a){var b=this.browser.supportTransform3D,c=b?"3d":"";return"translate"+c+"("+(a.x-a.pivotX)+"px, "+(a.y-a.pivotY)+(b?"px, 0px)":"px)")+"rotate"+c+(b?"(0, 0, 1, ":"(")+a.rotation+"deg)scale"+c+"("+a.scaleX+", "+a.scaleY+(b?", 1)":")")}}}(),c=function(){var a=function(a){a=a||{};var c=a.hasOwnProperty("constructor")?a.constructor:function(){};return b.call(c,a),c},b=function(a){var b,d,f={};for(b in a)d=a[b],c.hasOwnProperty(b)?c[b].call(this,d):f[b]=d;e(this.prototype,f)},c={Extends:function(a){var b=this.prototype,c=d(a.prototype);e(this,a),e(c,b),c.constructor=this,this.prototype=c,this.superclass=a.prototype},Mixes:function(a){a instanceof Array||(a=[a]);for(var b,c=this.prototype;b=a.shift();)e(c,b.prototype||b)},Statics:function(a){e(this,a)}},d=function(){if(Object.__proto__)return function(a){return{__proto__:a}};var a=function(){};return function(b){return a.prototype=b,new a}}(),e=function(a){for(var b=1,c=arguments.length;c>b;b++){var d,e=arguments[b];for(var f in e){var h=e[f];!h||"object"!=typeof h||void 0===h.value&&"function"!=typeof h.get&&"function"!=typeof h.set?a[f]=h:(d=d||{},d[f]=h)}d&&g(a,d)}return a};try{var f=Object.defineProperty,g=Object.defineProperties;f({},"$",{value:0})}catch(h){"__defineGetter__"in Object&&(f=function(a,b,c){return"value"in c&&(a[b]=c.value),"get"in c&&a.__defineGetter__(b,c.get),"set"in c&&a.__defineSetter__(b,c.set),a},g=function(a,b){for(var c in b)b.hasOwnProperty(c)&&f(a,c,b[c]);return a})}return{create:a,mix:e}}(),d={_listeners:null,on:function(a,b,c){for(var d=this._listeners=this._listeners||{},e=d[a]=d[a]||[],f=0,g=e.length;g>f;f++){var h=e[f];if(h.listener===b)return}return e.push({listener:b,once:c}),this},off:function(a,b){if(0==arguments.length)return this._listeners=null,this;var c=this._listeners&&this._listeners[a];if(c){if(1==arguments.length)return delete this._listeners[a],this;for(var d=0,e=c.length;e>d;d++){var f=c[d];if(f.listener===b){c.splice(d,1),0===c.length&&delete this._listeners[a];break}}}return this},fire:function(a,b){var c,d;"string"==typeof a?d=a:(c=a,d=a.type);var f=this._listeners;if(!f)return!1;var g=f[d];if(g){g=g.slice(0),c=c||new e(d,this,b);for(var h=0;h<g.length&&!c._stopped;h++){var i=g[h];i.listener.call(this,c),i.once&&g.splice(h--,1)}return 0==g.length&&delete f[d],!0}return!1}},e=c.create({constructor:function(a,b,c){this.type=a,this.target=b,this.detail=c,this.timeStamp=+new Date},type:null,target:null,detail:null,timeStamp:0,stopImmediatePropagation:function(){this._stopped=!0}}),f=c.create({constructor:function(a){a=a||{},b.copy(this,a,!0)},canvas:null,startDraw:function(){},draw:function(){},endDraw:function(){},transform:function(){},hide:function(){},remove:function(){},clear:function(){}}),g=c.create({Extends:f,constructor:function z(a){z.superclass.constructor.call(this,a);var b=this.canvas,c=a.width,d=a.height;this.context=b.getContext("2d"),c&&d&&(b.width=c,b.height=d)},context:null,startDraw:function(a){a instanceof m&&this.context.clearRect(0,0,a.width,a.height),this.context.save()},draw:function(a){var b=a.drawable;if(b&&b.image){var c=this.context,d=b.rect;c.drawImage(b.image,d[0],d[1],d[2],d[3],0,0,a.width,a.height)}},endDraw:function(){this.context.restore()},transform:function(a){var b=this.context,c=a.scaleX,d=a.scaleY;if(a instanceof m){var e=this.canvas.style,f=a._scaleX,g=a._scaleY;(!f&&1!=c||f&&f!=c)&&(a._scaleX=c,e.width=c*a.width+"px"),(!g&&1!=d||g&&g!=d)&&(a._scaleY=d,e.height=d*a.height+"px")}else{var h=a.x,i=a.y,j=a.pivotX,k=a.pivotY,l=a.rotation%360;(0!=h||0!=i)&&b.translate(h,i),0!=l&&b.rotate(l*Math.PI/180),(1!=c||1!=d)&&b.scale(c,d),(0!=j||0!=k)&&b.translate(-j,-k)}a.alpha>0&&(b.globalAlpha*=a.alpha)},remove:function(a){if(a instanceof p){var b=a.drawable.domElement,c=b&&b.parentNode;c&&c.removeChild(b)}},clear:function(a,b,c,d){this.context.clearRect(a,b,c,d)}}),h=function(){function a(a,c){var d=a.tagName||"div",e=c.image,f=a.width||e&&e.width,g=a.height||e&&e.height,h=b.createElement(d),i=h.style;if(a.id&&(h.id=a.id),i.position="absolute",i.left=(a.left||0)+"px",i.top=(a.top||0)+"px",i.width=f+"px",i.height=g+"px","canvas"==d){if(h.width=f,h.height=g,e){var j=h.getContext("2d"),k=c.rect||[0,0,f,g];j.drawImage(e,k[0],k[1],k[2],k[3],a.x||0,a.y||0,a.width||k[2],a.height||k[3])}}else if(i.opacity=void 0!=a.alpha?a.alpha:1,(a instanceof m||a.clipChildren)&&(i.overflow="hidden"),e&&e.src){i.backgroundImage="url("+e.src+")";var l=a.rectX||0,n=a.rectY||0;i.backgroundPosition=-l+"px "+-n+"px"}return h}return c.create({Extends:f,constructor:function d(a){d.superclass.constructor.call(this,a)},startDraw:function(b){var c=b.drawable=b.drawable||new j;c.domElement=c.domElement||a(b,c)},draw:function(a){var b=a.parent,c=a.drawable.domElement,d=c.parentNode;if(b){var e=b.drawable.domElement;e!=d&&e.appendChild(c)}else a instanceof m&&!d&&this.canvas.appendChild(c)},transform:function(a){b.setElementStyleByView(a)},remove:function(a){var b=a.drawable.domElement,c=b.parentNode;c&&c.removeChild(b)},hide:function(a){var b=a.drawable&&a.drawable.domElement;b&&(b.style.display="none")}})}(),i=c.create({constructor:function(a,b,c,d,e,f){this.a=a,this.b=b,this.c=c,this.d=d,this.tx=e,this.ty=f},concat:function(a){var b=arguments,c=this.a,d=this.b,e=this.c,f=this.d,g=this.tx,h=this.ty;if(b.length>=6)var i=b[0],j=b[1],k=b[2],l=b[3],m=b[4],n=b[5];else i=a.a,j=a.b,k=a.c,l=a.d,m=a.tx,n=a.ty;return this.a=c*i+d*k,this.b=c*j+d*l,this.c=e*i+f*k,this.d=e*j+f*l,this.tx=g*i+h*k+m,this.ty=g*j+h*l+n,this},rotate:function(a){var b=Math.sin(a),c=Math.cos(a),d=this.a,e=this.b,f=this.c,g=this.d,h=this.tx,i=this.ty;return this.a=d*c-e*b,this.b=d*b+e*c,this.c=f*c-g*b,this.d=f*b+g*c,this.tx=h*c-i*b,this.ty=h*b+i*c,this},scale:function(a,b){return this.a*=a,this.d*=b,this.tx*=a,this.ty*=b,this},translate:function(a,b){return this.tx+=a,this.ty+=b,this},identity:function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},invert:function(){var a=this.a,b=this.b,c=this.c,d=this.d,e=this.tx,f=a*d-b*c;return this.a=d/f,this.b=-b/f,this.c=-c/f,this.d=a/f,this.tx=(c*this.ty-d*e)/f,this.ty=-(a*this.ty-b*e)/f,this},transformPoint:function(a,b,c){var d=a.x*this.a+a.y*this.c+this.tx,e=a.x*this.b+a.y*this.d+this.ty;return b&&(d=d+.5>>0,e=e+.5>>0),c?{x:d,y:e}:(a.x=d,a.y=e,a)}}),j=c.create({constructor:function(a){this.init(a)},image:null,rect:null,init:function(a){var c=this;j.isDrawable(a)?c.image=a:b.copy(c,a,!0);var d=c.image;if("string"==typeof d){var e=new Image;return e.onload=function(){e.onload=null,c.init(e)},e.src=d,c.image=null,void 0}d&&!this.rect&&(this.rect=[0,0,d.width,d.height])},Statics:{isDrawable:function(a){return a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement}}}),k=function(){function a(a,b,c){for(var d,e,f,g,h=0,i=!1,j=0,k=c.length;k>j;j++){var l=c[j],m=c[(j+1)%k];if(l.y==m.y&&b==l.y&&(l.x>m.x?(d=m.x,e=l.x):(d=l.x,e=m.x),a>=d&&e>=a))i=!0;else if(l.y>m.y?(f=m.y,g=l.y):(f=l.y,g=m.y),!(f>b||b>g)){var n=(b-l.y)*(m.x-l.x)/(m.y-l.y)+l.x;n>a?h++:n==a&&(i=!0)}}return i||h%2==1}function e(a,b){var c=f(a,b,{overlap:-1/0,normal:{x:0,y:0}});return c?f(b,a,c):!1}function f(a,b,c){for(var d,e,f,g,h,i,j,k,l,m=a.length,n=b.length,o={x:0,y:0},p=0;m>p;p++){d=a[p],e=a[m-1>p?p+1:0],o.x=d.y-e.y,o.y=e.x-d.x,f=Math.sqrt(o.x*o.x+o.y*o.y),o.x/=f,o.y/=f,g=h=a[0].x*o.x+a[0].y*o.y;for(var q=1;m>q;q++)k=a[q].x*o.x+a[q].y*o.y,k>h?h=k:g>k&&(g=k);for(i=j=b[0].x*o.x+b[0].y*o.y,q=1;n>q;q++)k=b[q].x*o.x+b[q].y*o.y,k>j?j=k:i>k&&(i=k);if(i>g?(l=i-h,o.x=-o.x,o.y=-o.y):l=g-j,l>=0)return!1;l>c.overlap&&(c.overlap=l,c.normal.x=o.x,c.normal.y=o.y)}return c}return c.create({Mixes:d,constructor:function(a){a=a||{},this.id=this.id||a.id||b.getUid("View"),b.copy(this,a,!0)},id:null,x:0,y:0,width:0,height:0,alpha:1,rotation:0,visible:!0,pivotX:0,pivotY:0,scaleX:1,scaleY:1,pointerEnabled:!0,drawable:null,boundsArea:null,parent:{get:function(){return this._parent||null}},stage:{get:function(){for(var a,b=this;a=b.parent;)b=a;return b instanceof m?b:null}},depth:{get:function(){return this._parent&&this._depth||-1}},measuredWidth:{get:function(){return this.width*this.scaleX}},measuredHeight:{get:function(){return this.height*this.scaleY}},removeFromParent:function(){var a=this.parent;a&&a.removeChild(this)},getBounds:function(){for(var a,b,c,d,e,f,g,h=this.width,i=this.height,j=this.getConcatenatedMatrix(),k=this.boundsArea||[{x:0,y:0},{x:h,y:0},{x:h,y:i},{x:0,y:i}],l=[],m=0,n=k.length;n>m;m++)a=j.transformPoint(k[m],!0,!0),b=a.x,c=a.y,0==m?(d=e=b,f=g=c):(d>b?d=b:b>e&&(e=b),f>c?f=c:c>g&&(g=c)),l[m]=a;return l.x=d,l.y=f,l.width=e-d,l.height=g-f,l},getConcatenatedMatrix:function(a){var b=new i(1,0,0,1,0,0);if(a!==this)for(var c=this;c.parent&&c.parent!=a;c=c.parent){var d=1,e=0,f=c.rotation%360,g=c.pivotX,h=c.pivotY,j=c.scaleX,k=c.scaleY;if(f){var l=f*Math.PI/180;d=Math.cos(l),e=Math.sin(l)}0!=g&&(b.tx-=g),0!=h&&(b.ty-=h),b.concat(d*j,e*j,-e*k,d*k,c.x,c.y)}return b},hitTestPoint:function(b,c,d){var e=this.getBounds(),f=b>=e.x&&b<=e.x+e.width&&c>=e.y&&c<=e.y+e.height;return f&&d&&(f=a(b,c,e)),f},hitTestObject:function(a,b){var c=this.getBounds(),d=a.getBounds(),f=c.x<=d.x+d.width&&d.x<=c.x+c.width&&c.y<=d.y+d.height&&d.y<=c.y+c.height;return f&&b&&(f=e(c,d)),!!f},_render:function(a,b){return a=this.renderer||a,!this.visible||this.alpha<=0?(a.hide(this),void 0):(this.fire("beforerender",b),a.startDraw(this),a.transform(this),this.render(a,b),a.endDraw(this),this.fire("afterrender",b),void 0)},render:function(a){a.draw(this)},toString:function(){return b.viewToString(this)}})}(),l=c.create({Extends:k,constructor:function A(a){a=a||{},this.id=this.id||a.id||b.getUid("Container"),A.superclass.constructor.call(this,a),this.children?this._updateChildren():this.children=[]},children:null,pointerChildren:!0,clipChildren:!1,numChildren:{get:function(){return this.children.length}},addChildAt:function(a,b){var c=this.children,d=c.length,e=a.parent;b=0>b?0:b>d?d:b;var f=this.getChildIndex(a);return f==b?this:(f>=0?c.splice(f,1):e&&e.removeChild(a),c.splice(b,0,a),this._updateChildren(b),this)},addChild:function(){for(var a=this.children.length,b=arguments,c=0,d=b.length;d>c;c++)this.addChildAt(b[c],a+c);return this},removeChildAt:function(a){var b=this.children;if(0>a||a>=b.length)return null;var c=b[a];if(c){var d=this.stage;d&&d.renderer.remove(c),c._parent=null,c._depth=-1}return b.splice(a,1),this._updateChildren(a),c},removeChild:function(a){return this.removeChildAt(this.getChildIndex(a))},removeChildById:function(a){for(var b,c=this.children,d=0,e=c.length;e>d;d++)if(b=c[d],b.id===a)return this.removeChildAt(d),b;return null},removeAllChildren:function(){for(;this.children.length;)this.removeChildAt(0);return this},getChildAt:function(a){var b=this.children;return 0>a||a>=b.length?null:b[a]},getChildById:function(a){for(var b,c=this.children,d=0,e=c.length;e>d;d++)if(b=c[d],b.id===a)return b;return null},getChildIndex:function(a){return this.children.indexOf(a)},setChildIndex:function(a,b){var c=this.children,d=c.indexOf(a);if(d>=0&&d!=b){var e=c.length;b=0>b?0:b>=e?e-1:b,c.splice(d,1),c.splice(b,0,a),this._updateChildren()}return this},swapChildren:function(a,b){var c=this.children,d=this.getChildIndex(a),e=this.getChildIndex(b);a._depth=e,c[e]=a,b._depth=d,c[d]=b},swapChildrenAt:function(a,b){var c=this.children,d=this.getChildAt(a),e=this.getChildAt(b);d._depth=b,c[b]=d,e._depth=a,c[a]=e},sortChildren:function(a){var b=a,c=this.children;if("string"==typeof b){var d=b;b=function(a,b){return b[d]-a[d]}}c.sort(b),this._updateChildren()},_updateChildren:function(a,b){for(var c,d=this.children,a=a||0,b=b||d.length,e=a;b>e;e++)c=d[e],c._depth=e+1,c._parent=this},contains:function(a){return this.getChildIndex(a)>=0},getViewAtPoint:function(a,b,c,d,e){for(var f,g,h=d?[]:null,i=this.children,j=i.length-1;j>=0;j--)if(f=i[j],!(!f||!f.visible||f.alpha<=0||e&&!f.pointerEnabled))if(f.children&&f.numChildren&&(!e||f.pointerChildren)&&(g=f.getViewAtPoint(a,b,c,d,e)),g){if(!d)return g;g.length&&(h=h.concat(g))}else if(f.hitTestPoint(a,b,c)){if(!d)return f;h.push(f)}return d&&h.length?h:null},render:function(a,b){l.superclass.render.call(this,a,b);for(var c=this.children,d=0,e=c.length;e>d;d++){var f=c[d];f._render(a,b)}}}),m=c.create({Extends:l,constructor:function B(a){a=a||{},this.id=this.id||a.id||b.getUid("Stage"),B.superclass.constructor.call(this,a);var c=this.canvas;if(!c)throw new Error("Stage: canvas is required.");this.renderer=c.getContext?new g(a):new h(a),this.updateViewport()},canvas:null,renderer:null,paused:!1,viewport:null,tick:function(a){this.paused||this._render(this.renderer,a)},enableDOMEvent:function(a,b){for(var c=this,d=c.canvas,e="string"==typeof a?[a]:a,f=c._domListener||(c._domListener=function(a){c._onDOMEvent(a)}),g=0;g<e.length;g++){var a=e[g];b===!1?d.removeEventListener(a,f):d.addEventListener(a,f,!1)}},_onDOMEvent:function(a){var b=a.type,c=a,d=0==b.indexOf("touch");if(d){var e=a.touches,f=a.changedTouches;c=e&&e.length?e[0]:f&&f.length?f[0]:null,c.type=b}var g=c.pageX||c.clientX,h=c.pageY||c.clientY,i=this.viewport;c.stageX=g=(g-i.left)/this.scaleX,c.stageY=h=(h-i.top)/this.scaleY;var j=this.getViewAtPoint(g,h,!0,!1,!0),k=this.canvas,l=this._eventTarget,m="mouseout"===b&&!k.contains(a.relatedTarget);if(l&&(l!=j||m)){var n="touchmove"===b?"touchout":"mousemove"===b||m||!j?"mouseout":null;n&&l.fire(n),c.lastEventTarget=l,this._eventTarget=null}if(j&&j.pointerEnabled&&"mouseout"!==b&&(c.eventTarget=this._eventTarget=j,j.fire(c)),!d){var o=j&&j.pointerEnabled&&j.useHandCursor?"pointer":"";k.style.cursor=o}(m||"mouseout"!==b)&&this.fire(c)},updateViewport:function(){return this.viewport=b.getElementRect(this.canvas)}}),n=c.create({Extends:k,constructor:function C(a){if(a=a||{},this.id=this.id||a.id||b.getUid("Bitmap"),C.superclass.constructor.call(this,a),this.drawable=new j(a),!this.width||!this.height){var c=this.drawable.rect;c&&(this.width=c[2],this.height=c[3])}}}),o=c.create({Extends:k,constructor:function D(a){a=a||{},this.id=this.id||a.id||b.getUid("Sprite"),D.superclass.constructor.call(this,a),this._frames=[],this._frameNames={},this.drawable=new j,a.frames&&this.addFrame(a.frames)},_frames:null,_frameNames:null,_frameElapsed:0,_currentFrame:0,paused:!1,loop:!0,timeBased:!1,interval:1,currentFrame:{get:function(){return this._currentFrame}},numFrames:{get:function(){return this._frames?this._frames.length:0}},addFrame:function(a){var b=this._frames.length;if(a instanceof Array)for(var c=0,d=a.length;d>c;c++)this.setFrame(a[c],b+c);else this.setFrame(a,b);return this},setFrame:function(a,b){var c=this._frames,d=c.length;return b=0>b?0:b>d?d:b,c[b]=a,a.name&&(this._frameNames[a.name]=a),(0==b&&!this.width||!this.height)&&(this.width=a.rect[2],this.height=a.rect[3]),this},getFrame:function(a){if("number"==typeof a){var b=this._frames;return 0>a||a>=b.length?null:b[a]}return this._frameNames[a]},getFrameIndex:function(a){var b=this._frames,c=b.length,d=-1;if("number"==typeof a)d=a;else{var e="string"==typeof a?this._frameNames[a]:a;if(e)for(var f=0;c>f;f++)if(e===b[f]){d=f;break}}return d},play:function(){return this.paused=!1,this},stop:function(){return this.paused=!0,this},"goto":function(a,b){var c=this._frames.length,d=this.getFrameIndex(a);return this._currentFrame=0>d?0:d>=c?c-1:d,this.paused=b,this},_render:function(a,b){var c=this._nextFrame(b),d=this._frames[c];this.drawable.init(d),o.superclass._render.call(this,a,b)},_nextFrame:function(a){var b=this._frames,c=b.length,d=this._currentFrame,e=b[d],f=e.duration||this.interval,g=this._frameElapsed,h=0!=d||this.drawable?g+(this.timeBased?a:1):0;return g=this._frameElapsed=f>h?h:0,(e.stop||!this.loop&&d>=c-1)&&this.stop(),this.paused||0!=g||(null!=e.next?d=this.getFrameIndex(e.next):d>=c-1?d=0:this.drawable&&d++,this._currentFrame=d),this.fire("enterframe",{frame:d}),d}}),p=c.create({Extends:k,constructor:function E(a){a=a||{},this.id=this.id||a.id||b.getUid("DOMElement"),E.superclass.constructor.call(this,a),this.drawable=new j;var c=this.drawable.domElement=a.element||b.createElement("div");c.id=this.id},_render:function(a,c){{var d=this.drawable.domElement,e=d.style;d.parentNode}return!this.visible||this.alpha<=0?(e.display="none",void 0):(e.display="",this.fire("beforerender",c),b.setElementStyleByView(this),this.render(a,c),this.fire("afterrender",c),void 0)},render:function(a){var b=a.canvas;if(b.getContext){var c,d=this.drawable.domElement,e=this.depth,f=b.nextSibling;if(d.parentNode)return;for(;f&&3!=f.nodeType&&(c=parseInt(f.style.zIndex)||0,!(0>=c||c>e));)f=f.nextSibling;b.parentNode.insertBefore(this.drawable.domElement,f)}else a.draw(this)}}),q=function(){var a=document.createElement("canvas").getContext("2d");return c.create({Extends:k,constructor:function d(a){a=a||{},this.id=this.id||a.id||b.getUid("Graphics"),d.superclass.constructor.call(this,a),this._actions=[],this._cache=null},lineWidth:1,lineAlpha:1,lineCap:null,lineJoin:null,miterLimit:10,hasStroke:!1,strokeStyle:"0",hasFill:!1,fillStyle:"0",fillAlpha:0,lineStyle:function(a,b,c,d,e,f){var g=this,h=g._addAction;return h.call(g,["lineWidth",g.lineWidth=a||1]),h.call(g,["strokeStyle",g.strokeStyle=b||"0"]),h.call(g,["lineAlpha",g.lineAlpha=c||1]),void 0!=d&&h.call(g,["lineCap",g.lineCap=d]),void 0!=e&&h.call(g,["lineJoin",g.lineJoin=e]),void 0!=f&&h.call(g,["miterLimit",g.miterLimit=f]),g.hasStroke=!0,g},beginFill:function(a,b){var c=this,d=c._addAction;return d.call(c,["fillStyle",c.fillStyle=a]),d.call(c,["fillAlpha",c.fillAlpha=b||1]),c.hasFill=!0,c},endFill:function(){var a=this,b=a._addAction;return a.hasStroke&&b.call(a,["stroke"]),a.hasFill&&b.call(a,["fill"]),a},beginLinearGradientFill:function(b,c,d,e,f,g){for(var h=this,i=a.createLinearGradient(b,c,d,e),j=0,k=f.length;k>j;j++)i.addColorStop(g[j],f[j]);return h.hasFill=!0,h._addAction(["fillStyle",h.fillStyle=i])},beginRadialGradientFill:function(b,c,d,e,f,g,h,i){for(var j=this,k=a.createRadialGradient(b,c,d,e,f,g),l=0,m=h.length;m>l;l++)k.addColorStop(i[l],h[l]);return j.hasFill=!0,j._addAction(["fillStyle",j.fillStyle=k])},beginBitmapFill:function(b,c){var d=this,e=a.createPattern(b,c||"");return d.hasFill=!0,d._addAction(["fillStyle",d.fillStyle=e])},beginPath:function(){return this._addAction(["beginPath"])},closePath:function(){return this._addAction(["closePath"])},drawRect:function(a,b,c,d){return this._addAction(["rect",a,b,c,d])},drawRoundRectComplex:function(a,b,c,d,e,f,g,h){var i=this,j=i._addAction;return j.call(i,["moveTo",a+e,b]),j.call(i,["lineTo",a+c-f,b]),j.call(i,["arc",a+c-f,b+f,f,-Math.PI/2,0,!1]),j.call(i,["lineTo",a+c,b+d-g]),j.call(i,["arc",a+c-g,b+d-g,g,0,Math.PI/2,!1]),j.call(i,["lineTo",a+h,b+d]),j.call(i,["arc",a+h,b+d-h,h,Math.PI/2,Math.PI,!1]),j.call(i,["lineTo",a,b+e]),j.call(i,["arc",a+e,b+e,e,Math.PI,3*Math.PI/2,!1]),i},drawRoundRect:function(a,b,c,d,e){return this.drawRoundRectComplex(a,b,c,d,e,e,e,e)},drawCircle:function(a,b,c){return this._addAction(["arc",a+c,b+c,c,0,2*Math.PI,0])},drawEllipse:function(a,b,c,d){var e=this;if(c==d)return e.drawCircle(a,b,c);var f=e._addAction,g=c/2,h=d/2,i=.5522847498307933,j=i*g,k=i*h;return a+=g,b+=h,f.call(e,["moveTo",a+g,b]),f.call(e,["bezierCurveTo",a+g,b-k,a+j,b-h,a,b-h]),f.call(e,["bezierCurveTo",a-j,b-h,a-g,b-k,a-g,b]),f.call(e,["bezierCurveTo",a-g,b+k,a-j,b+h,a,b+h]),f.call(e,["bezierCurveTo",a+j,b+h,a+g,b+k,a+g,b]),e},drawSVGPath:function(a){var b=this,c=b._addAction,d=a.split(/,| (?=[a-zA-Z])/);c.call(b,["beginPath"]);for(var e=0,f=d.length;f>e;e++){var g=d[e],h=g[0].toUpperCase(),i=g.substring(1).split(/,| /);switch(0==i[0].length&&i.shift(),h){case"M":c.call(b,["moveTo",i[0],i[1]]);break;case"L":c.call(b,["lineTo",i[0],i[1]]);break;case"C":c.call(b,["bezierCurveTo",i[0],i[1],i[2],i[3],i[4],i[5]]);break;case"Z":c.call(b,["closePath"])}}return b},_draw:function(a){var b,c=this,d=c._actions,e=d.length;for(a.beginPath(),b=0;e>b;b++){var f=d[b],g=f[0],h=f.length>1?f.slice(1):null;"function"==typeof a[g]?a[g].apply(a,h):a[g]=f[1]}},render:function(a){var b=this,c=a.canvas;if(c.getContext)b._draw(a.context);else{var d=b.drawable;d.image||(d.image=b.toImage()),a.draw(b)}},cache:function(a){var c=this,d=c._cache;return d||(d=c._cache=b.createElement("canvas",{width:c.width,height:c.height}),c._draw(d.getContext("2d"))),a&&(d=c._cache=c.toImage()),d},uncache:function(){this._cache=null},toImage:function(a){var c=this,d=c._cache,e=c.width,f=c.height;if(d||(d=b.createElement("canvas",{width:e,height:f}),c._draw(d.getContext("2d"))),!(d instanceof HTMLImageElement)){var g=d.toDataURL(a||"image/png");d=new Image,d.src=g,d.width=e,d.height=f}return d},clear:function(){var a=this;a._actions.length=0,a._cache=null,a.lineWidth=1,a.lineAlpha=1,a.lineCap=null,a.lineJoin=null,a.miterLimit=10,a.hasStroke=!1,a.strokeStyle="0",a.hasFill=!1,a.fillStyle="0",a.fillAlpha=1},_addAction:function(a){var b=this;return b._actions.push(a),b}})}(),r=c.create({Extends:k,constructor:function F(a){a=a||{},this.id=this.id||a.id||b.getUid("Text"),F.superclass.constructor.call(this,a),this.width||(this.width=200),this.font||(this.font="12px arial")},text:null,color:null,textAlign:null,outline:!1,lineSpacing:0,textWidth:0,textHeight:0,font:{get:function(){return this._font||null},set:function(a){this._font!==a&&(this._font=a,this._fontHeight=r.measureFontHeight(a))}},render:function(a){var b=this,c=a.canvas;if(c.getContext)b._draw(a.context);else{var d=b.drawable,e=d.domElement,f=e.style;f.font=b.font,f.textAlign=b.textAlign,f.color=b.color,f.width=b.width+"px",f.height=b.height+"px",f.lineHeight=b._fontHeight+b.lineSpacing+"px",e.innerHTML=b.text,a.draw(this)}},_draw:function(a){var b=this,c=b.text.toString();if(c){a.font=b.font,a.textAlign=b.textAlign,a.textBaseline="top",b.outline?a.strokeStyle=b.color:a.fillStyle=b.color;var d,e,f,g=c.split(/\r\n|\r|\n|<br(?:[ \/])*>/),h=0,i=0,j=b._fontHeight+b.lineSpacing;for(d=0,len=g.length;len>d;d++)if(e=g[d],f=a.measureText(e).width,f<=b.width)b._drawTextLine(a,e,i),f>h&&(h=f),i+=j;else{var k,l,m,n="",o=0;for(l=0,wlen=e.length;wlen>l;l++)m=e[l],k=a.measureText(n+m).width,k>b.width?(b._drawTextLine(a,n,i),o>h&&(h=o),i+=j,n=m):(o=k,n+=m),l==wlen-1&&(b._drawTextLine(a,n,i),n!==m&&k>h&&(h=k),i+=j)}b.textWidth=h,b.textHeight=i,b.height||(b.height=i)}},_drawTextLine:function(a,b,c){var d=this,e=0,f=d.width;switch(d.textAlign){case"center":e=.5*f>>0;break;case"right":case"end":e=f}d.outline?a.strokeText(b,e,c):a.fillText(b,e,c)},Statics:{measureFontHeight:function(a){var c,d=document.documentElement,e=b.createElement("div",{style:{font:a,position:"absolute"},innerHTML:"M"});return d.appendChild(e),c=e.offsetHeight,d.removeChild(e),c}}}),s=c.create({Extends:l,constructor:function G(a){a=a||{},this.id=this.id||a.id||b.getUid("BitmapText"),G.superclass.constructor.call(this,a),this.pointerChildren=!1},glyphs:null,letterSpacing:0,text:{get:function(){return this._text||""},set:function(a){var b=this,a=a.toString(),c=a.length;if(b._text!=a){b._text=a,b.removeAllChildren();var d,e,f,g,h=0,i=0;for(d=0;c>d;d++)e=a.charAt(d),f=b.glyphs[e],f&&(g=new n({image:f.image,rect:f.rect,x:h}),h+=(h>0?b.letterSpacing:0)+f.rect[2],heigth=Math.max(i,f.rect[3]),b.addChild(g));b.width=h,b.height=i}}},hasGlyphs:function(a){var b=this.glyphs;if(!b)return!1;var c,a=a.toString(),d=a.length;for(c=0;d>c;c++)if(!b[a.charAt(c)])return!1;return!0}}),t=function(){function a(a,c,e){if(void 0===c){var f=a;a=f.image,c=f.frames,e=f.sprites}if(c)for(var g,h,i=[],j=0,k=c.length;k>j;j++)h=c[j],g={image:a,rect:[h[0],h[1],h[2],h[3]],pivotX:h[4]||0,pivotY:h[5]||0},i[j]=g;if(e){var l,m,n,o={};for(var p in e){if(l=e[p],b(l))m=d(i[l]);else if(l instanceof Array){m=[];for(var j=0,k=l.length;k>j;j++){var q,r=l[j];b(r)?n=d(i[r]):(q=r.rect,b(q)&&(q=i[r.rect]),n=d(q,r)),m[j]=n}}o[p]=m}}return{frames:i,sprites:o}}function b(a){return"number"==typeof a}function d(a,b){var c={image:a.image,rect:a.rect,pivotX:a.pivotX||0,pivotY:a.pivotY||0};return b&&(c.name=b.name||null,c.duration=b.duration||0,c.stop=!!b.stop,c.next=b.next||null),c}return c.create({constructor:function(b,c,d){var e=a(b,c,d);this._frames=e.frames,this._sprites=e.sprites},_frames:null,_sprites:null,getFrame:function(a){var b=this._frames;return b&&b[a]},getSprite:function(a){var b=this._sprites;return b&&b[a]}})}(),u=c.create({constructor:function(a){this._targetFPS=a||30,this._interval=1e3/this._targetFPS,this._tickers=[]},_paused:!1,_targetFPS:0,_interval:0,_intervalId:null,_tickers:null,_lastTime:0,_tickCount:0,_tickTime:0,_measuredFPS:0,start:function(c){if(!this._intervalId){this._lastTime=+new Date;var d=this,e=this._interval,f=a.requestAnimationFrame||a[b.browser.jsVendor+"RequestAnimationFrame"];if(c&&f)var g=function(){d._tick()},h=function(){d._intervalId=setTimeout(h,e),f(g)};else h=function(){d._intervalId=setTimeout(h,e),d._tick()};h()}},stop:function(){clearTimeout(this._intervalId),this._intervalId=null,this._lastTime=0},pause:function(){this._paused=!0},resume:function(){this._paused=!1},_tick:function(){if(!this._paused){for(var a=+new Date,b=a-this._lastTime,c=this._tickers,d=0,e=c.length;e>d;d++)c[d].tick(b);var f=+new Date;++this._tickCount>=this._targetFPS?(this._measuredFPS=1e3/(this._tickTime/this._tickCount)+.5>>0,this._tickCount=0,this._tickTime=0):this._tickTime+=f-this._lastTime,this._lastTime=f}},getMeasuredFPS:function(){return this._measuredFPS},addTick:function(a){if(!a||"function"!=typeof a.tick)throw new Error("Ticker: The tick object must implement the tick method.");this._tickers.push(a)},removeTick:function(a){var b=this._tickers,c=b.indexOf(a);c>=0&&b.splice(c,1)}}),v=Array.prototype,w=v.slice;v.indexOf=v.indexOf||function(a,b){b=b||0;var c,d=this.length;if(0==d||b>=d)return-1;for(0>b&&(b=d+b),c=b;d>c;c++)if(this[c]===a)return c;return-1};var x=Function.prototype;x.bind=x.bind||function(a){function b(){var e=d.concat(w.call(arguments));return c.apply(this instanceof b?this:a,e)}var c=this,d=w.call(arguments,1),e=function(){};return e.prototype=c.prototype,b.prototype=new e,b};var y=function(){return c.create({constructor:function(a,b,c){var d=this;d.target=a,d._oldProps={},d._newProps={},d._deltaProps={},d._startTime=0,d._lastTime=0,d._pausedTime=0,d._pausedStartTime=0,d._reverseFlag=1,d._frameTotal=0,d._frameCount=0;for(var e in b){var f=a[e],g=b[e];void 0!==f&&"number"==typeof f&&"number"==typeof g&&(d._oldProps[e]=f,d._newProps[e]=g,d._deltaProps[e]=g-f)}for(var e in c)d[e]=c[e]},target:null,time:0,delay:0,paused:!1,loop:!1,reverse:!1,interval:0,ease:null,next:null,onUpdate:null,onComplete:null,setProps:function(a,b){for(var c in a)this.target[c]=this._oldProps[c]=a[c];for(var c in b)this._newProps[c]=b[c],this._deltaProps[c]=b[c]-this.target[c]},_init:function(){this._startTime=Date.now()+this.delay,this._pausedTime=0,this.interval>0&&(this._frameTotal=Math.round(this.time/this.interval)),y.add(this)},start:function(){this._init(),this.paused=!1},stop:function(){y.remove(this)},pause:function(){this.paused=!0,this._pausedStartTime=Date.now()},resume:function(){this.paused=!1,this._pausedTime+=Date.now()-this._pausedStartTime},_update:function(){if(!this.paused){var a=Date.now(),b=a-this._startTime-this._pausedTime;if(!(0>b)){this._lastTime=a;var c=this._frameTotal>0?++this._frameCount/this._frameTotal:b/this.time;c>1&&(c=1);var d=this.ease?this.ease(c):c;for(var e in this._oldProps)this.target[e]=this._oldProps[e]+this._deltaProps[e]*this._reverseFlag*d;if(this.onUpdate&&this.onUpdate(d),c>=1){if(this.reverse){var f=this._oldProps;this._oldProps=this._newProps,this._newProps=f,this._startTime=Date.now(),this._frameCount=0,this._reverseFlag*=-1}else if(this.loop){for(var e in this._oldProps)this.target[e]=this._oldProps[e];this._startTime=Date.now(),this._frameCount=0}else{y.remove(this);var g,h=this.next;h&&(h instanceof y?(g=h,h=null):g=h.shift(),g&&(g.next=h,g.start()))}this.onComplete&&this.onComplete(this),this.reverse&&!this.loop&&(this.reverse=!1)}}}},Statics:{_tweens:[],tick:function(){for(var a=this._tweens,b=a.length;--b>=0;)a[b]._update();return this},add:function(a){return-1==this._tweens.indexOf(a)&&this._tweens.push(a),this},remove:function(a){if(a){var b=this._tweens,c=b.indexOf(a);c>-1&&b.splice(c,1)}return this},removeAll:function(){return this._tweens.length=0,this},to:function(a,b,c){var d=new y(a,b,c);return d._init(),d},from:function(a,b,c){var d=new y(a,b,c),e=d._oldProps;d._oldProps=d._newProps,d._newProps=e,d._reverseFlag=-1;for(var f in d._oldProps)a[f]=d._oldProps[f];return d._init(),d}}})}();b.Class=c,b.EventMixin=d,b.Renderer=f,b.CanvasRenderer=g,b.DOMRenderer=h,b.Matrix=i,b.Drawable=j,b.View=k,b.Container=l,b.Stage=m,b.Bitmap=n,b.Sprite=o,b.DOMElement=p,b.Graphics=q,b.Text=r,b.BitmapText=s,b.TextureAtlas=t,b.Ticker=u,b.Tween=y,a.Hilo=b}(window);